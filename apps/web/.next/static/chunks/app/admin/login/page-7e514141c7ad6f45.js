(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{220:(e,t,s)=>{"use strict";function a(){{let e=window.location.hostname;return"http://".concat(e,":4000")}}s.d(t,{h:()=>a})},1758:(e,t,s)=>{Promise.resolve().then(s.bind(s,9318))},7541:(e,t,s)=>{"use strict";var a=s(3041);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9318:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(4568),r=s(7620),n=s(7541),i=s(220);function l(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),h=async s=>{s.preventDefault(),d(""),m(!0);try{let s=(0,i.h)(),a=await fetch("".concat(s,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:l})}),r=await a.json();if(!a.ok)throw Error(r.error||"Login failed");if("ADMIN"!==r.user.role)throw Error("Access denied. Admin privileges required.");localStorage.setItem("eq_admin_token",r.token),localStorage.setItem("eq_admin_name",r.user.full_name||""),e.push("/admin/dashboard")}catch(e){d(e.message)}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full p-8 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("img",{src:"/equiyield-logo.webp",alt:"EquiYield",className:"w-24 h-24"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-900",children:"Admin Login"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:h,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Email"}),(0,a.jsx)("input",{className:"input",type:"email",value:t,onChange:e=>s(e.target.value),required:!0,autoComplete:"email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Password"}),(0,a.jsx)("input",{className:"input",type:"password",value:l,onChange:e=>u(e.target.value),required:!0,autoComplete:"current-password"})]}),o&&(0,a.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded p-3",children:o}),(0,a.jsx)("button",{className:"btn btn-primary w-full",type:"submit",disabled:c,children:c?"Signing inâ€¦":"Sign In"})]})]})})}}},e=>{e.O(0,[587,18,358],()=>e(e.s=1758)),_N_E=e.O()}]);