(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{220:(e,a,t)=>{"use strict";function l(){{let e=window.location.hostname;return"http://".concat(e,":4000")}}t.d(a,{h:()=>l})},1199:(e,a,t)=>{Promise.resolve().then(t.bind(t,8867))},8867:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var l=t(4568),o=t(7620),r=t(220);function s(e){return"₱".concat(e.toLocaleString())}function n(e){let{title:a,widgets:t}=e;return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:a}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(e=>(0,l.jsxs)("div",{className:"p-4 rounded-lg border border-gray-700 bg-gray-800/80 ".concat(e.color||""),title:e.tooltip,children:[(0,l.jsx)("div",{className:"text-xs text-gray-400 mb-1 font-medium",children:e.label}),(0,l.jsx)("div",{className:"text-xl font-bold text-white",children:e.value})]},e.label))})]})}function i(){let[e,a]=(0,o.useState)(null),[t,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)("");if((0,o.useEffect)(()=>{!async function(){try{let e=(0,r.h)(),t=await fetch("".concat(e,"/api/admin/dashboard"),{headers:function(){let e=localStorage.getItem("eq_admin_token");return e?{Authorization:"Bearer ".concat(e)}:{}}(),cache:"no-store"});if(!t.ok)throw Error("Failed to load dashboard");let l=await t.json();a(l)}catch(e){c(e.message)}finally{i(!1)}}()},[]),t)return(0,l.jsx)("div",{children:"Loading dashboard…"});if(d)return(0,l.jsx)("div",{className:"text-red-400",children:d});if(!e)return(0,l.jsx)("div",{children:"No data available"});let b=e.totalMembers>0?Math.round(e.onTimeMembers/e.totalMembers*100):0,u=e.totalMembers>0?Math.round(e.delayedMembers/e.totalMembers*100):0,m=e.totalLoanAmount>0?Math.round(e.totalLoanAmount/(e.totalLoanAmount+e.availableForLoans)*100):0,v=[{label:"Total Members",value:e.totalMembers},{label:"On-time Members",value:e.onTimeMembers,color:"border-green-600/30"},{label:"Delayed Members",value:e.delayedMembers,color:"border-red-600/30"},{label:"Compliance Rate",value:"".concat(b,"%"),color:"border-blue-600/30"}],h=[{label:"Total Collections",value:s(e.totalCollections),color:"border-green-600/30"},{label:"Delayed Rate",value:"".concat(u,"%"),color:"border-orange-600/30",tooltip:"Percentage of members with delayed payments"}],f=[{label:"Active Loans",value:e.loanAvailments},{label:"Total Loan Amount",value:s(e.totalLoanAmount),color:"border-yellow-600/30"},{label:"Available for Loans",value:s(e.availableForLoans),color:"border-green-600/30"},{label:"Loan Utilization",value:"".concat(m,"%"),color:"border-blue-600/30",tooltip:"Percentage of available funds used for loans"},{label:"Total Loan Payments",value:s(e.totalLoanPayments),color:"border-purple-600/30"}],x=[{label:"Est. Profit Pool (Current Year)",value:s(e.currentYearProfitPool),color:"border-pink-600/30"},{label:"Total Expenses",value:s(e.totalExpenses),color:"border-red-600/30"},{label:"Net Profit",value:s(e.netProfit),color:e.netProfit>=0?"border-green-600/30":"border-red-600/30"},{label:"Est. Dividend Per Share",value:s(e.estimatedDividendPerShare),color:"border-green-600/30",tooltip:"Based on net profit \xf7 active shares"},{label:"Active Shares",value:e.activeShares},{label:"Members Eligible",value:e.membersEligibleForDividend,tooltip:"Members with active shares"}];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,l.jsxs)("span",{className:"text-sm text-gray-400",children:[(0,l.jsxs)("span",{className:"font-semibold",children:["Cycle ",e.cycle]})," • Due ",(0,l.jsx)("span",{className:"font-semibold",children:new Date(e.dueDate).toLocaleDateString()})]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Real-time overview of member compliance, contributions, loans, and profits."})]}),(0,l.jsx)(n,{title:"\uD83D\uDC65 Member Overview",widgets:v}),(0,l.jsx)(n,{title:"\uD83D\uDCB0 Contribution Tracking",widgets:h}),(0,l.jsx)(n,{title:"\uD83D\uDCCA Loan Management",widgets:f}),(0,l.jsx)(n,{title:"\uD83C\uDF81 Profit & Dividends",widgets:x})]})}}},e=>{e.O(0,[587,18,358],()=>e(e.s=1199)),_N_E=e.O()}]);